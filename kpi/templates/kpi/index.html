
{% extends 'homepage/generic_page.html' %}
{% load staticfiles %}
{% block content %}
    {% include "kpi/filter.html" %}
  <div class="row">
      <div class="span12">
        <a name="table_date"><h3>数据分析结果[按日期]</h3></a> 
        <a href="#table_total">汇总</a> <a href="#chart">趋势图</a> <a href="#explain">指标定义</a>
        <table class="table table-hover table-striped">
          <tr>
            <th>日期</th>
            <th>搜索次数</th>
            <th>点击率</th>
            <th>点击次数</th>
            <th>平均点击次数</th>
            <th>平均点击位置</th>
            <th>平均首次点击位置</th>
            <th>首页平均点击次数</th>
            <th>首页平均点击位置</th>
            <th>热搜词搜索次数</th>
            <th>热搜词点击率</th>
            <th>平均翻页次数</th>
            <th>无结果率</th>
          </tr>
        {% for item in overall_result %}
          <tr>
            <td>{{ item.statdate|date:"Y-d-M" }} </td>
            <td>{{ item.searchnum }} </td>
            <td>{{ item.clickrate }} </td>
            <td>{{ item.clicknum }} </td>
            <td>{{ item.avgclicknum }} </td>
            <td>{{ item.avgclickpos }} </td>
            <td>{{ item.avgfirstclickpos }} </td>
            <td>{{ item.avgpageoneclicknum }} </td>
            <td>{{ item.avgpageoneclickpos }} </td>
            <td>{{ item.hotkeywordsearchnum }} </td>
            <td>{{ item.hotclickrate }} </td>
            <td>{{ item.avgdropdown }} </td>
            <td>{{ item.noresultrate }} </td>
          </tr>
        {% endfor %}
        </table>
      </div>

      <div class="span12">
        <a name="table_total"><h3>数据分析结果[汇总]</h3>
        </a> <a href="#table_date">细分</a> <a href="#chart">趋势图</a><a href="#explain">指标定义</a>
        <table class="table table-hover table-striped">
          <tr>
            <th>日期</th>
            <th>搜索次数</th>
            <th>点击率</th>
            <th>点击次数</th>
            <th>平均点击次数</th>
            <th>平均点击位置</th>
            <th>平均首次点击位置</th>
            <th>首页平均点击次数</th>
            <th>首页平均点击位置</th>
            <th>热搜词搜索次数</th>
            <th>热搜词点击率</th>
            <th>平均翻页次数</th>
            <th>无结果率</th>
          </tr>
        {% for item in total_result %}
          <tr>
            <td>{{ item.from_date|date:"Y-d-M"  }}-{{ item.to_date|date:"Y-d-M"  }} </td>
            <td>{{ item.searchnum }} </td>
            <td>{{ item.clickrate }} </td>
            <td>{{ item.clicknum }} </td>
            <td>{{ item.avgclicknum }} </td>
            <td>{{ item.avgclickpos }} </td>
            <td>{{ item.avgfirstclickpos }} </td>
            <td>{{ item.avgpageoneclicknum }} </td>
            <td>{{ item.avgpageoneclickpos }} </td>
            <td>{{ item.hotkeywordsearchnum }} </td>
            <td>{{ item.hotclickrate }} </td>
            <td>{{ item.avgdropdown }} </td>
            <td>{{ item.noresultrate }} </td>
          </tr>
        {% endfor %}
        </table>
      </div>

      <div class="span12">
        <a name="chart"><h3>各个指标的趋势图</h3></a> 
        <a href="#table_date">细分</a> <a href="#table_total">汇总</a><a href="#explain">指标定义</a>
        <div id="search_num_chart"></div>
        <div id="click_rate_chart"></div>
      </div>

      <div class="span8">
      <a name="explain"><h3>各个指标的解释</h3></a>
      <a href="#table_date">细分</a> <a href="#table_total">汇总</a><a href="#chart">图表</a>
      <p>点击率 = 有点击的搜索次数 / 总的搜索次数 </p>
      <p>点击率 = 点击次数 / 有点击的搜索次数 </p>
      <p>平均点击位置 = 点击位置总和 / 总的点击次数</p>
      <p>平均点击次数 = 点击次数总和 / 有点击的搜索次数</p>
      <p>平均首次点击位置 = 首次点击位置总和 / 有点击的搜索次数</p>
    </div>
  </div>
{% endblock %}